<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Data, ora, prognoza</title>
<style>
  :root {
    --bg: #121212;
    --card-bg: #1e1e1e;
    --text-primary: #fff;
    --text-secondary: #aaa;
    --accent: #4fc3f7;
  }
  body {
    margin: 0; padding: 2rem;
    background: var(--bg);
    color: var(--text-primary);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex; flex-direction: column; align-items: center;
    gap: 1.5rem;
    min-height: 100vh;
  }
  .card {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 1rem;
    width: 350px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    text-align: center;
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s forwards;
    transition: box-shadow 0.3s ease, transform 0.3s ease;
  }
  .card:hover {
    box-shadow: 0 15px 40px rgba(79, 195, 247, 0.7);
    transform: translateY(-5px);
  }
  .day {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 0.5rem;
    transition: color 0.3s ease;
  }
  .date, .time, .weather-info {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin-bottom: 0.3rem;
    transition: color 0.3s ease;
  }
  #player-input {
    width: 100%;
    padding: 0.5rem;
    border-radius: 0.5rem;
    border: none;
    font-size: 1rem;
    margin-bottom: 1rem;
    transition: box-shadow 0.3s ease;
  }
  #player-input:focus {
    outline: none;
    box-shadow: 0 0 10px var(--accent);
  }
  iframe {
    width: 100%;
    height: 200px;
    border-radius: 1rem;
    border: none;
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  iframe.visible {
    opacity: 1;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  #time-cards {
    display: flex; 
    flex-wrap: wrap; 
    gap: 1rem; 
    justify-content: center; 
    max-width: 1100px;
  }
</style>
</head>
<body>

  <div id="time-cards">
  </div>

  <div class="card" style="animation-delay: 0.5s;">
    <div class="day">Player YouTube</div>
    <input id="player-input" type="text" placeholder="Link video" />
    <iframe id="yt-player" src="" allowfullscreen></iframe>
  </div>

  <div class="card" id="weather" style="animation-delay: 1s;">
    <div class="day">Sistem incomplet/Incomplete system</div>
    <div id="weather-info">Se încarcă...</div>
  </div>

<script>
  const zones = [
    { city: "București", tz: "Europe/Bucharest", lang: "ro-RO" },
  ];

  const timeCardsContainer = document.getElementById("time-cards");

  zones.forEach(({city}, i) => {
    const card = document.createElement("div");
    card.className = "card";
    card.style.animationDelay = `${i * 0.2}s`;
    card.innerHTML = `
      <div class="day">${city}: <span class="day-name"></span></div>
      <div class="date"><span class="date-val"></span></div>
      <div class="time"><span class="time-val"></span></div>
    `;
    timeCardsContainer.appendChild(card);
  });

  function updateTimeCards() {
    const cards = timeCardsContainer.querySelectorAll(".card");
    zones.forEach(({tz, lang}, i) => {
      const now = new Date();
      const day = new Intl.DateTimeFormat(lang, { weekday: 'long', timeZone: tz }).format(now);
      const date = new Intl.DateTimeFormat(lang, { day: 'numeric', month: 'long', year: 'numeric', timeZone: tz }).format(now);
      const time = new Intl.DateTimeFormat(lang, { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZone: tz }).format(now);

      const card = cards[i];
      card.querySelector(".day-name").textContent = day.charAt(0).toUpperCase() + day.slice(1);
      card.querySelector(".date-val").textContent = date;
      card.querySelector(".time-val").textContent = time;
    });
  }
  setInterval(updateTimeCards, 1000);
  updateTimeCards();

  // Player YouTube embed
  const input = document.getElementById("player-input");
  const iframe = document.getElementById("yt-player");

  input.addEventListener("change", () => {
    const url = input.value.trim();
    const videoIdMatch = url.match(/(?:v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
    if(videoIdMatch) {
      const videoId = videoIdMatch[1];
      iframe.src = `https://www.youtube.com/embed/${videoId}`;
      iframe.classList.add("visible");
    } else {
      iframe.src = "";
      iframe.classList.remove("visible");
      alert("Link YouTube invalid!");
    }
  });

  const apiKey = '';
  const city = 'Bucharest';
  const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&lang=ro&appid=${apiKey}`;

  function afiseazaMeteo(data) {
    if(data.cod !== 200) {
      document.getElementById('weather-info').innerText = 'Nu s-a putut obține prognoza meteo.';
      return;
    }
    const temp = data.main.temp.toFixed(1);
    const descriere = data.weather[0].description;
    const umiditate = data.main.humidity;
    const vant = data.wind.speed;

    document.getElementById('weather-info').innerHTML = `
      <p>Temperatura: ${temp} °C</p>
      <p>Stare: ${descriere.charAt(0).toUpperCase() + descriere.slice(1)}</p>
      <p>Umiditate: ${umiditate}%</p>
      <p>Vânt: ${vant} m/s</p>
    `;
  }

  fetch(url)
    .then(res => res.json())
    .then(afiseazaMeteo)
    .catch(() => {
      document.getElementById('weather-info').innerText = 'Eroare la preluarea datelor meteo.';
    });
</script>

</body>
</html>
